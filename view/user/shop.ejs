<%- include('../layout/userLayouts/header.ejs') %>
<%- include('../layout/userLayouts/nav.ejs') %> 

<main class="main">
    
 
    <!-- Shop Top Filter Section Start -->
    <section class="shop-page">
      <div class="container-lg">
        <div class="row gy-4 g-lg-3 g-xxl-4">
          <div class="col-12">
            <div class="row gy-5 gx-0">
              <div class="col-12">
                <div class="shop-product">
                  <div class="filter-top-wrapper">
                    <span class="filter-top-back">Filter: <i data-feather="x"></i> </span>
                    
                    <div class="filter-option-wrapper">
                      
                      <ul class="filterlist">
                        <li class="filter-items">
                          <div class="select-menu">
                            
                            <a href="/shop">Clean All</a>
                           
                            <div class="dropdown select-dropdown">
                              <button>Price <i data-feather="chevron-down"></i></button>
                              <div class="onhover-show-div size">
                                <div class="filter-content">
                                  <ul class="filter-check">
                                    <li>
                                      <li><a href="/priceSort/<%= 1 %>"> Low To High</a></li>
                                      <li><a href="/priceSort/<%= -1 %>">High To low</a></li>
                                    </li>
                                   
                                  </ul>
                                </div>
                              </div>
                            </div>

                            

                            
                           

                            <div class="dropdown select-dropdown">
                              <button>Categories <span class="notification"></span> <i data-feather="chevron-down"></i></button>
                              <div class="onhover-show-div size">
                                <div class="filter-content">
                                

                                  
                                  <ul class="filter-check">
                          
                                        <% category.forEach((cat)=>{ %>
                                    <li>
                      
                                      <!-- <label class="checkboxes style-1"> -->
                                        <!-- <input type="checkbox" checked=""> -->
                                        <a class=""  href="/filterCategory/<%= cat._id %>"><%= cat.category_name %></a>
                                       
                                      <!-- </label> -->
                                      
                                
                                    </li>
                                    <%  }) %>
                                     
                                     
                                  </ul>
                              </div>
                              </div>
                            </div>
                          </div>
                        </li>
                      </ul>
                    </div>
                  </div>
                  <form action="/form" method="post">
                    <div class="container">
                      <div class="row">
                        <div class="col-3">
                          <div class="header-search-wrapper search-wrapper-wide">
                            <label for="q" class="sr-only">Search</label>
                            <div class="input-group">
                              <input type="search" class="form-control" name="search" id="q" placeholder="Search product..." required>
                              <button class="btn btn-primary" type="submit"><i class="icon-search"></i><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                              </svg></button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </form>
                <br><br>
                  
                  
                      
                  
                  

                  <div class="product-tab-content">
                    
                    <div class="view-option row g-3 g-xl-4 ratio_asos row-cols-2 row-cols-sm-3 row-cols-xl-4 grid-section">
                      
                           <% if(productData.length > 0){ %>
                          <% productData.forEach((product) => { %>
                      <div >
                   
                        <div class="product-card">
                          <div class="img-box">
                            <!-- Thumbnail -->
                          

                            <a href="/product/<%= product._id %>" class="primary-img"><img class="img-fluid bg-img" src="/adminAssets/adminImages/<%= product.image[0] %>" alt="product"> </a>

                            <!-- Rating -->
                            <!-- <div class="rating">
                              <span>4.5 <i data-feather="star"></i> </span>
                              <span>185</span>
                            </div> -->

                            <!-- Option -->
                            <ul class="option-wrap">
                              <li>
                                <a href="javascript:void(0)" class="wishlist-btn">
                                  <i data-feather="heart"></i>
                                </a>
                              </li>
                              <li>
                                <a href="compare.html"><i data-feather="repeat"></i></a>
                              </li>
                              <li>
                                <a href="javascript:void(0)" data-bs-toggle="modal" data-bs-target="#viewModal">
                                  <i data-feather="eye"></i>
                                </a>
                              </li>
                              <li>
                                <a href="javascript:void(0)" class="addtocart-btn"> <i data-feather="shopping-bag"></i> </a>
                              </li>
                            </ul>
                          </div>

                          <!-- Content Box -->
                          <div class="content-box">
                            <a href="/product">
                              <h5><%= product.product_title %></h5>

                              <% if (product.offer) { %>
                                <del class="text-danger"><p><strong><%= product.product_price %></strong></p></del>
                                <p><strong>₹ <%= product.product_price - product.offer.offPrice %></strong></p>
                              <% } else { %>
                                <span><strong>₹ <%= product.product_price %></strong></span>
                              <% } %>
                              
                              <p class="details truncate-3">
                                Wardrobe stylish fitted long sleeves pleats texture fabric mini neckline cobalt blue. Best seller signature waist cut pockets cotton-mix navy blue tailoring elegant
                                cashmere.Tops shift shape rich fabric relaxed fitting size true black gold zip virgin wool.
                              </p>
                            </a>
                            <a href="javascript:void(0)" class="btn btn-solid btn-sm mb-line addtocart-btn">Add To Cart <i class="arrow"></i> </a>
                          </div>
                        </div>

                        

                      </div>
                      <% })%>
                        <% } %>
                    </div>
                    <br><br><br>

                    <!-- Pagination Start -->
                    <div class="ec-pro-pagination ">
                                
                      <ul class="pagination justify-content-center">
                          <li class="page-item <%= currentPage === 1 ? 'disabled' : '' %>">
                              <a class="prev" href="?page=<%= currentPage - 1 %>" aria-label="Previous" tabindex="-1" aria-disabled="true">
                                  <span aria-hidden="true"><i class="icon-long-arrow-left"></i></span>Prev
                              </a>
                          </li>
                          <% for (let i = 1; i <= totalPages; i++) { %>
                      <li class="page-item <%= currentPage === i ? 'active' : '' %> ms-2" aria-current="page">
                          <a class="page-link" href="?page=<%= i %>"><%= i %></a>
                      </li>
                         <% } %>
                         <li class="page-item <%= currentPage === totalPages ? 'disabled' : '' %>">
                      <a class="next" href="?page=<%= currentPage + 1 %>" aria-label="Next">
                          Next <span aria-hidden="true"><i class="icon-long-arrow-right"></i></span>
                      </a>
                     </li>

                      </ul>
                  </div>
                  </div>
              
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- Shop Top Filter Section End -->
  </main>
  <%- include('../layout/userLayouts/footer.ejs') %>
